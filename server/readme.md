1. –ú—ã –¥–µ–ª–∞–µ–º –∫–ª–∞—Å—Å MyTokenVerifier, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å–ª–µ–¥—É–µ—Ç TokenVerifier –∏–∑ –º–æ–¥—É–ª—è mcp.server.auth.provider. –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ—Å—Ç—É–ø–∏–≤—à–µ–≥–æ —Ç–æ–∫–µ–Ω–∞. –í –º–µ—Ç–æ–¥–µ verify_token(self, token) —Ç—ã —Ä–µ–∞–ª–∏–∑—É–µ—à—å —Å–≤–æ—é –ª–æ–≥–∏–∫—É (JWT, –ë–î, –≤—ã–∑–æ–≤ –≤–Ω–µ—à–Ω–µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—à—å AccessToken –∏–ª–∏ None. ([GitHub][1])
2. –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ FastMCP –º—ã –ø–µ—Ä–µ–¥–∞—ë–º token_verifier=MyTokenVerifier() –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é auth=auth_settings (–Ω—É–∂–µ–Ω AuthSettings). ([GitHub][1])
3. –ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ HTTP (streamable HTTP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç), MCP SDK –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ –≤ HTTP-–∑–∞–ø—Ä–æ—Å–µ –±—É–¥–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ Authorization: Bearer <token> (–ª–∏–±–æ –¥—Ä—É–≥–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ MCP auth). SDK –≤—ã–∑—ã–≤–∞–µ—Ç —Ç–≤–æ–π verify_token –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏. –ï—Å–ª–∏ verify_token –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None, —Å–µ—Å—Å–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–π, –∏ —Ç—ã –Ω–µ —Å–º–æ–∂–µ—à—å –ø–æ–ª—É—á–∏—Ç—å ctx.session.access_token. ([GitHub][1])
4. –í–Ω—É—Ç—Ä–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (@mcp.tool()) —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–∏–Ω—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç ctx: Context[...] –∏ –æ—Ç—Ç—É–¥–∞ –ø–æ–ª—É—á–∏—Ç—å ctx.session.access_token (–µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞). –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Ç—ã –º–æ–∂–µ—à—å –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –≤—ã–∑–æ–≤ –∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É.
5. mcp.run(transport="streamable-http") –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä —Å HTTP-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º, –ø–æ–¥—Ö–æ–¥—è—â–∏–º –¥–ª—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ SCP-–∫–ª–∏–µ–Ω—Ç–æ–≤, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º –ø–æ—Ç–æ–∫–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. ([GitHub][1])

–í–æ—Ç –ø—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ Python, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Ç–≤–æ–µ–º—É MCP —Å–µ—Ä–≤–µ—Ä—É —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –ø–æ —Ç–æ–∫–µ–Ω—É –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –ø–µ—Ä–µ–¥–∞–≤–∞—è —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization: Bearer <token>.

---

## ‚úÖ –ß—Ç–æ —Ç—ã –ø–æ–ª—É—á–∏—à—å:

* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MCP —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ http+stream —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç.
* –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –ø–µ—Ä–µ–¥–∞—á–µ–π —Ç–æ–∫–µ–Ω–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ.
* –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (whoami, echo).
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞.

---

## üêç –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MCP SDK –∫–ª–∏–µ–Ω—Ç–∞

pip install "mcp[client]"

---

## üìÑ client.py ‚Äî –ü—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞ MCP —Å —Ç–æ–∫–µ–Ω–æ–º

import asyncio
from mcp import McpClient, Context

async def main():
    # –¢–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Authorization –∑–∞–≥–æ–ª–æ–≤–∫–µ
    token = "secret-token-123"  # –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä

    # –°–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç–∞
    client = McpClient(
        url="http://localhost:8000",  # –∞–¥—Ä–µ—Å —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
        access_token=token,  # MCP SDK —Å–∞–º –¥–æ–±–∞–≤–∏—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ Authorization: Bearer ...
        transport="http+stream"
    )

    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
    async with client as session:
        # –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ "whoami"
        whoami_response = await session.call_tool("whoami", {})
        print("–û—Ç–≤–µ—Ç –æ—Ç whoami:", whoami_response)

        # –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ "echo"
        echo_response = await session.call_tool("echo", {"message": "–ü—Ä–∏–≤–µ—Ç!"})
        print("–û—Ç–≤–µ—Ç –æ—Ç echo:", echo_response)

if __name__ == "__main__":
    asyncio.run(main())

---

## üîê –ß—Ç–æ –¥–µ–ª–∞–µ—Ç access_token?

–ö–æ–≥–¥–∞ —Ç—ã –ø–µ—Ä–µ–¥–∞—ë—à—å access_token –≤ McpClient, SDK –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç:

Authorization: Bearer <—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω>

–≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ MCP-—Å–µ—Å—Å–∏–∏.

---

## üì¶ –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π?

–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –≤–µ—Ä–Ω—ë—Ç AccessToken (–∏–ª–∏ verify_token –≤–µ—Ä–Ω—ë—Ç None), —Ç–æ–≥–¥–∞:

* MCP-—Å–µ—Å—Å–∏—è —Å–æ–∑–¥–∞—Å—Ç—Å—è, –Ω–æ ctx.session.access_token –±—É–¥–µ—Ç None.
* –°–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –æ—Ç–∫–∞–∑–∞—Ç—å –≤ –≤—ã–∑–æ–≤–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (–≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ scopes).

---

## üß™ –¢–µ—Å—Ç

–ó–∞–ø—É—Å—Ç–∏ —Å–Ω–∞—á–∞–ª–∞ —Å–µ—Ä–≤–µ—Ä (—Å–º. –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ—Ç–≤–µ—Ç), –ø–æ—Ç–æ–º –∫–ª–∏–µ–Ω—Ç:

python server.py

–û—Ç–¥–µ–ª—å–Ω–æ:

python client.py

---

## –•–æ—á–µ—à—å:

* –ü—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞ —Å JWT?
* –ü—Ä–∏–º–µ—Ä —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –∏–∑ OAuth2?
* –ò–ª–∏ –∫–ª–∏–µ–Ω—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ (JavaScript)?

–°–∫–∞–∂–∏, –∏ —è —Å–¥–µ–ª–∞—é.
